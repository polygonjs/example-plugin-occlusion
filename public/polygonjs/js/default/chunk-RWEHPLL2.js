var P={sceneData:{start:0,mult:.25},assets:{start:.25,mult:0},nodes:{start:.25,mult:.75}};var O=(t=>(t.EXPORT_MANIFEST="scene/export_manifest.json",t.CODE_PREFIX="scene/code",t.PROPERTIES="scene/code/properties.json",t.EDITOR="scene/editor.json",t.ASSETS="scene/assets.json",t.POLYGONJS="js/all.js",t.SCENE_DATA_LOADER="js/sceneDataLoader.js",t.POLY_CONFIG="js/polyConfig.js",t.JS_FILES="scene/js_files.json",t.POSTER="images/poster.png",t))(O||{});var I=class{static async importSceneData(s){s.editorMode==null&&(s.editorMode=!1);let e=s.manifest,n=s.urlPrefix||O.CODE_PREFIX,r=Object.keys(e.nodes),c=[];for(let o of r){let i=e.nodes[o],h=`${n}/root/${o}.json?t=${i}`;c.push(h)}let p=`${n}/root.json?t=${e.root}`,_=`${n}/properties.json?t=${e.properties}`,u=[p,_];if(s.editorMode){let o=Date.now();u.push(`${n}/ui.json?t=${o}`)}for(let o of c)u.push(o);let j=0,m=u.length,R=o=>{let i=P.sceneData;s.onProgress&&s.onProgress(i.start+i.mult*o)},T=u.map(async o=>{let i=await fetch(o);return j++,R(j/m),i}),A=await Promise.all(T),a=[];for(let o of A)a.push(await o.json());let f={root:a[0],properties:a[1]},E=2;s.editorMode&&(f.ui=a[2],E+=1);let g={},d=Object.keys(e.nodes);for(let o=0;o<d.length;o++){let i=d[o],h=a[o+E];g[i]=h}return this.assemble(f,d,g)}static async assemble(s,e,n){let r={root:s.root,properties:s.properties,ui:s.ui};for(let c=0;c<e.length;c++){let p=e[c],_=n[p];this.insert_child_data(r.root,p,_)}return r}static insert_child_data(s,e,n){let r=e.split("/");if(r.length==1)s.nodes||(s.nodes={}),s.nodes[e]=n;else{let c=r.shift(),p=r.join("/"),_=s.nodes[c];this.insert_child_data(_,p,n)}}};var S="1617634285546",$="1612794181127",L={perspectiveCamera1:"1611775094302","perspectiveCamera1/events1":"1617634285546",MAT:"1617634285546","MAT/meshBasicBuilder_OCCLUSION":"1617634285546","MAT/meshStandardBuilder_OCCLUSION":"1643117594570",dogWithOcclusion:"1611769603815",spheres:"1611769603815",headWithOcclusion:"1611769603815",dogWithoutOcclusion:"1611769709682",dogWithOcclusionAndLighting:"1611771713883"},G={properties:S,root:$,nodes:L};export{P as a,I as b,G as c};
